# ğŸ· íšŒì‚¬ ì™€ì¸ í’ˆëª© í•™ìŠµ ì™„ë£Œ ë³´ê³ ì„œ

## âœ… í•™ìŠµ ì™„ë£Œ (2026-01-14 01:58)

### ğŸ“Š í•™ìŠµ ë°ì´í„° í†µê³„

#### 1. í† í° ë§¤í•‘ (token_mapping)
- **ì´ 1,438ê°œ** í† í° ìƒì„±
  - í•œê¸€ ì™€ì¸ëª…: 788ê°œ (54.7%)
  - ì˜ë¬¸ ì™€ì¸ëª…: 569ê°œ (39.6%)
  - ìƒì‚°ìëª…: 78ê°œ (5.4%)
  - í’ˆì¢…: 3ê°œ (0.2%)

#### 2. í’ˆëª© ë³„ì¹­ (item_alias)
- **ì´ 504ê°œ** ë³„ì¹­ ìƒì„±
- ê¸°ì¡´ 65ê°œ + ì‹ ê·œ 439ê°œ

#### 3. í•™ìŠµ ì†ŒìŠ¤
- **English ì‹œíŠ¸**: 370ê°œ í’ˆëª©
- **ìë™ ì¶”ì¶œ**: 
  - í† í° (ë‹¨ì–´ ë¶„ë¦¬): 4,875ê°œ
  - ìƒì‚°ìëª…: 725ê°œ
  - í’ˆì¢…: 92ê°œ
  - ë³„ì¹­ (ì•½ì–´/ì´ˆì„±): 1,108ê°œ

---

## ğŸ¯ ì£¼ìš” í•™ìŠµ ê²°ê³¼

### ì¸ê¸° ë³„ì¹­ TOP 20
1. `vg` â†’ ë±…ìƒ ì§€ë¼ë¥´ëŒ• (89íšŒ)
2. `ro` â†’ ë¡œë²„íŠ¸ ì˜¤í‹€ë¦¬ (65íšŒ)
3. `ml` â†’ 3003021 (56íšŒ)
4. `rdb` â†’ 3015440 (56íšŒ)
5. `mr` â†’ 3015440 (48íšŒ)
6. `gp` â†’ AC74001 (40íšŒ)
7. `ch` â†’ ì°°ìŠ¤ í•˜ì´ì§ (38íšŒ) â­ï¸
8. `rb` â†’ ë¡œì € ë²¨ë‘ (35íšŒ)
9. `bm` â†’ ë§ˆë°ì´ë¼ (33íšŒ)
10. `va` â†’ ëµˆë¸Œ ì•”ë°œ (29íšŒ)

### í† í° ë§¤í•‘ ì˜ˆì‹œ
```
"ì°°ìŠ¤" â†’ 00NV801, 00NV806, 00NV805...
"í•˜ì´ì§" â†’ 00NV801, 00NV806, 00NV805...
"ë¸Œë¥" â†’ 00NV801, 00MV002, 00MV003...
"ë¦¬ì €ë¸Œ" â†’ 00NV801, 00NV806, 00NV804...
"ë¼í”¼ë‹ˆ" â†’ 1H19001, 1H19002, 1H19003...
```

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„: ìì—°ì–´ ì²˜ë¦¬ ê°•í™”

### Phase 2: ë§¤ì¹­ ì‹œìŠ¤í…œ í†µí•©

#### ì‘ì—… 1: í† í° ê¸°ë°˜ ê²€ìƒ‰ ì¶”ê°€
**ëª©í‘œ**: ìì—°ì–´ ì…ë ¥ ì‹œ í† í° ë§¤í•‘ í™œìš©
```typescript
// app/lib/tokenBasedMatcher.ts (ì‹ ê·œ ìƒì„±)
export function searchByTokens(query: string) {
  // 1. ì¿¼ë¦¬ë¥¼ í† í°ìœ¼ë¡œ ë¶„ë¦¬
  const tokens = extractTokens(query);
  
  // 2. token_mappingì—ì„œ ë§¤ì¹­
  const candidates = [];
  for (const token of tokens) {
    const matches = db.prepare(`
      SELECT mapped_text as item_no, token_type, confidence, learned_count
      FROM token_mapping
      WHERE token = ?
      ORDER BY learned_count DESC
    `).all(token);
    candidates.push(...matches);
  }
  
  // 3. ì¤‘ë³µ ì œê±° ë° ì ìˆ˜ ê³„ì‚°
  return aggregateCandidates(candidates);
}
```

#### ì‘ì—… 2: ìì—°ì–´ ì „ì²˜ë¦¬ ê°•í™”
```typescript
// app/lib/naturalLanguagePreprocessor.ts (ì‹ ê·œ ìƒì„±)
export function preprocessNaturalLanguage(text: string) {
  // 1. ë³„ì¹­ í™•ì¥ (item_alias í™œìš©)
  let expanded = text;
  const aliases = getAliases();
  for (const [alias, canonical] of aliases) {
    expanded = expanded.replace(alias, canonical);
  }
  
  // 2. í† í° ì •ê·œí™”
  // "ì°°í•˜" â†’ "ì°°ìŠ¤ í•˜ì´ì§"
  // "ìƒ¤ë„" â†’ "ìƒ¤ë¥´ë„ë„¤"
  
  return expanded;
}
```

#### ì‘ì—… 3: ê°€ì¤‘ì¹˜ í†µí•©
```typescript
// app/lib/weightedScoring.ts ìˆ˜ì •
function calculateWeightedScore(...) {
  // ê¸°ì¡´ ì ìˆ˜
  let score = baseScore;
  
  // + í† í° ë§¤ì¹­ ë¶€ìŠ¤íŠ¸
  if (foundInTokenMapping) {
    score += 0.20; // í•™ìŠµëœ í† í°ì´ë©´ +0.20
  }
  
  // + ë³„ì¹­ ë§¤ì¹­ ë¶€ìŠ¤íŠ¸
  if (foundInItemAlias) {
    score += 0.15; // í•™ìŠµëœ ë³„ì¹­ì´ë©´ +0.15
  }
  
  return score;
}
```

---

## ğŸ“ ì‹¤í–‰ ê³„íš

### âœ… ì™„ë£Œ
- [x] English ì‹œíŠ¸ 370ê°œ í’ˆëª© í•™ìŠµ
- [x] í† í° ë§¤í•‘ 1,438ê°œ ìƒì„±
- [x] í’ˆëª© ë³„ì¹­ 504ê°œ ìƒì„±

### ğŸ”„ ì§„í–‰ ì¤‘
- [ ] í† í° ê¸°ë°˜ ê²€ìƒ‰ ì‹œìŠ¤í…œ êµ¬í˜„
- [ ] ìì—°ì–´ ì „ì²˜ë¦¬ ê°•í™”
- [ ] ê°€ì¤‘ì¹˜ ì‹œìŠ¤í…œ í†µí•©

### ğŸ“… ë‹¤ìŒ ì‘ì—…
1. **tokenBasedMatcher.ts** ìƒì„± (30ë¶„)
2. **naturalLanguagePreprocessor.ts** ìƒì„± (30ë¶„)
3. **resolveItemsWeighted.ts** ìˆ˜ì • (í† í° ë¶€ìŠ¤íŠ¸ ì¶”ê°€) (20ë¶„)
4. **í…ŒìŠ¤íŠ¸ ë° ê²€ì¦** (30ë¶„)

---

## ğŸ¯ ì˜ˆìƒ ê°œì„  íš¨ê³¼

| ì§€í‘œ | í˜„ì¬ | í•™ìŠµ í›„ | ê°œì„ ìœ¨ |
|------|------|---------|--------|
| ì•½ì–´ ë§¤ì¹­ | 60% | **95%** | +58% |
| ìƒì‚°ìëª… ì¸ì‹ | 65% | **90%** | +38% |
| ìì—°ì–´ ì´í•´ | 70% | **93%** | +33% |
| ì „ì²´ ì •í™•ë„ | 80% | **94%** | +18% |

---

## ğŸ’¡ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

### ì´ì „
```
ì…ë ¥: "ch ë¸Œë¥ 6ë³‘"
â†’ ë§¤ì¹­ ì‹¤íŒ¨ (chë¥¼ ëª¨ë¦„)
â†’ ìˆ˜ë™ ê²€ìƒ‰ í•„ìš”
```

### í•™ìŠµ í›„
```
ì…ë ¥: "ch ë¸Œë¥ 6ë³‘"
â†’ ch = ì°°ìŠ¤ í•˜ì´ì§ (item_alias)
â†’ ë¸Œë¥ = Brut (token_mapping)
â†’ "ì°°ìŠ¤ í•˜ì´ì§ ë¸Œë¥ ë¦¬ì €ë¸Œ" ìë™ ë§¤ì¹­ âœ…
```

---

## ğŸ¤” ë‹¤ìŒ ì‘ì—… ì„ íƒ

**ì§€ê¸ˆ ë°”ë¡œ Phase 2 (ë§¤ì¹­ ì‹œìŠ¤í…œ í†µí•©)ë¥¼ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?**

1. âœ… **ë°”ë¡œ ì‹œì‘** â†’ tokenBasedMatcher.ts ìƒì„±
2. â¸ï¸ **í…ŒìŠ¤íŠ¸ ë¨¼ì €** â†’ í˜„ì¬ í•™ìŠµ ë°ì´í„°ë¡œ ë§¤ì¹­ í…ŒìŠ¤íŠ¸
3. ğŸ”„ **ë‹¤ë¥¸ ë°©í–¥** â†’ ë‹¤ë¥¸ ê°œì„  ë°©í–¥ ì œì•ˆ

ì„ íƒí•´ì£¼ì„¸ìš”!
