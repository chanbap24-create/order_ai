# ğŸ” ê²€ìƒ‰ í•™ìŠµ vs í’ˆëª© í•™ìŠµ(ë³„ì¹­) ì°¨ì´ì 

## ğŸ“Š **í•µì‹¬ ì°¨ì´ ìš”ì•½**

| êµ¬ë¶„ | ê²€ìƒ‰ í•™ìŠµ (search_learning) | í’ˆëª© í•™ìŠµ (item_alias) |
|------|---------------------------|----------------------|
| **í…Œì´ë¸”** | `search_learning` | `item_alias` |
| **ì €ì¥ ë‚´ìš©** | ê²€ìƒ‰ì–´ â†’ í’ˆëª©ë²ˆí˜¸ + í´ë¦­ íšŸìˆ˜ | ë³„ì¹­ â†’ í’ˆëª©ë²ˆí˜¸ |
| **íŠ¸ë¦¬ê±°** | **ìë™** (í›„ë³´ í´ë¦­ ì‹œ) | **ìˆ˜ë™** (í•™ìŠµ ë²„íŠ¼ í´ë¦­ ì‹œ) |
| **ì •ê·œí™”** | ê³µë°±/ê¸°í˜¸ ì™„ì „ ì œê±° | ìˆ˜ëŸ‰ ì œê±° + ë„ì–´ì“°ê¸° ìœ ì§€ |
| **ë³´ë„ˆìŠ¤ ì ìˆ˜** | +0.10 ~ +0.35 | +0.20 ~ +1.20 (3ë°° ë” ê°•ë ¥!) |
| **í™•ì • ì—¬ë¶€** | âŒ ë³´ë„ˆìŠ¤ë§Œ ë¶€ì—¬ | âœ… Exact/Specificì€ ì¦‰ì‹œ í™•ì • |

---

## ğŸ¯ **1. í’ˆëª© í•™ìŠµ (item_alias) - ìˆ˜ë™, ê°•ë ¥**

### **ì €ì¥ ë°©ì‹**
```sql
-- item_alias í…Œì´ë¸”
alias          canonical     count    last_used_at
-------------------------------------------------
"ch"           "3A24401"     3        2024-01-08 10:30:00
"ì°°ìŠ¤í•˜ì´ì§"    "3A24401"     1        2024-01-08 09:15:00
```

### **ì •ê·œí™” ë°©ì‹**
```javascript
// ìˆ˜ëŸ‰ ì œê±° + ë„ì–´ì“°ê¸° ìœ ì§€
ì…ë ¥: "ch ìƒ¤ë¥´ë„ë„¤ 24ë³‘"
ì •ê·œí™”: "ch ìƒ¤ë¥´ë„ë„¤"  // ë„ì–´ì“°ê¸° ìœ ì§€!

ì…ë ¥: "ì°°ìŠ¤í•˜ì´ì§ ìƒ¤ë¥´ë„ë„¤ ë¦¬ì €ë¸Œ 24ë³‘"
ì •ê·œí™”: "ì°°ìŠ¤í•˜ì´ì§ ìƒ¤ë¥´ë„ë„¤ ë¦¬ì €ë¸Œ"
```

### **ë§¤ì¹­ ë°©ì‹**
```javascript
// 1) Exact ë§¤ì¹­
ì…ë ¥: "ch"
ì €ì¥: "ch"
â†’ Exact ë§¤ì¹­! score 1.0 ì¦‰ì‹œ í™•ì •

// 2) Contains ë§¤ì¹­
ì…ë ¥: "ch ìƒ¤ë¥´ë„ë„¤"
ì €ì¥: "ch"
â†’ "ch ìƒ¤ë¥´ë„ë„¤".includes("ch") = true
â†’ Contains ë§¤ì¹­! +0.60 ~ +1.20 ë³´ë„ˆìŠ¤
```

### **ì ìˆ˜ ê³„ì‚°**
```
1íšŒ í•™ìŠµ: +0.20 Ã— 3.0 = +0.60
2íšŒ í•™ìŠµ: +0.30 Ã— 3.0 = +0.90
3íšŒ+ í•™ìŠµ: +0.40 Ã— 3.0 = +1.20
```

---

## ğŸ” **2. ê²€ìƒ‰ í•™ìŠµ (search_learning) - ìë™, ì•½í•¨**

### **ì €ì¥ ë°©ì‹**
```sql
-- search_learning í…Œì´ë¸”
search_key              item_no      hit_count    last_used_at
----------------------------------------------------------------
"chìƒ¤ë¥´ë„ë„¤"            "3A24401"    5            2024-01-08 10:30:00
"ì°°ìŠ¤í•˜ì´ì§ìƒ¤ë¥´ë„ë„¤"    "3A24401"    3            2024-01-08 09:15:00
```

### **ì •ê·œí™” ë°©ì‹** (ì™„ì „íˆ ë‹¤ë¦„!)
```javascript
// ê³µë°±/ê¸°í˜¸ ì™„ì „ ì œê±°
ì…ë ¥: "ch ìƒ¤ë¥´ë„ë„¤ 24ë³‘"
ì •ê·œí™”: "chìƒ¤ë¥´ë„ë„¤"  // ê³µë°±ë„ ì œê±°!

ì…ë ¥: "ì°°ìŠ¤í•˜ì´ì§ ìƒ¤ë¥´ë„ë„¤ ë¦¬ì €ë¸Œ 24ë³‘"
ì •ê·œí™”: "ì°°ìŠ¤í•˜ì´ì§ìƒ¤ë¥´ë„ë„¤ë¦¬ì €ë¸Œ"  // ëª¨ë“  ê³µë°± ì œê±°!
```

### **ë§¤ì¹­ ë°©ì‹**
```javascript
// 1) Exact ë§¤ì¹­ (ê¸¸ì´ 6ì ì´ìƒ)
ì…ë ¥: "ch ìƒ¤ë¥´ë„ë„¤"
ì •ê·œí™”: "chìƒ¤ë¥´ë„ë„¤" (8ì)
ì €ì¥: "chìƒ¤ë¥´ë„ë„¤"
â†’ Exact ë§¤ì¹­! âœ…

// 2) Contains ë§¤ì¹­ (ì œí•œì )
ì…ë ¥: "ch ìƒ¤ë¥´ë„ë„¤ ë¦¬ì €ë¸Œ"
ì •ê·œí™”: "chìƒ¤ë¥´ë„ë„¤ë¦¬ì €ë¸Œ" (11ì)
ì €ì¥: "chìƒ¤ë¥´ë„ë„¤" (8ì)
â†’ "chìƒ¤ë¥´ë„ë„¤ë¦¬ì €ë¸Œ".includes("chìƒ¤ë¥´ë„ë„¤") = true
â†’ ë‹¨, ì €ì¥ëœ í‚¤ê°€ 8ì ì´ìƒì´ì–´ì•¼ ë§¤ì¹­ âœ…

// âŒ ë§¤ì¹­ ë¶ˆê°€ (ë„ˆë¬´ ì§§ìŒ)
ì…ë ¥: "ch"
ì •ê·œí™”: "ch" (2ì)
â†’ 6ì ë¯¸ë§Œì´ë¼ ê²€ìƒ‰ í•™ìŠµ ë¬´ì‹œë¨!
```

### **ì ìˆ˜ ê³„ì‚°** (í´ë¦­ íšŸìˆ˜ ê¸°ë°˜)
```javascript
ë³´ë„ˆìŠ¤ = min(0.35, 0.10 + log(1 + hit_count) * 0.08)

1íšŒ í´ë¦­: +0.155
2íšŒ í´ë¦­: +0.188
3íšŒ í´ë¦­: +0.211
5íšŒ í´ë¦­: +0.245
10íšŒ í´ë¦­: +0.292
20íšŒ+ í´ë¦­: +0.35 (ìµœëŒ€ê°’)
```

---

## ğŸ¯ **ì‹¤ì „ ì‹œë‚˜ë¦¬ì˜¤: "ch" ì €ì¥ì˜ ì˜í–¥**

### **ì‹œë‚˜ë¦¬ì˜¤ 1: "ch" ë‹¨ë… ì…ë ¥**

#### **í’ˆëª© í•™ìŠµ (item_alias)**
```
ì €ì¥: "ch" â†’ "3A24401"

ì…ë ¥: "ch"
â†’ Exact ë§¤ì¹­! score 1.0 ì¦‰ì‹œ í™•ì • âœ…

ì…ë ¥: "ch 24ë³‘"
â†’ ì •ê·œí™”: "ch"
â†’ Exact ë§¤ì¹­! score 1.0 ì¦‰ì‹œ í™•ì • âœ…
```

#### **ê²€ìƒ‰ í•™ìŠµ (search_learning)**
```
ì €ì¥: "ch" â†’ "3A24401" (5íšŒ í´ë¦­)

ì…ë ¥: "ch"
â†’ ì •ê·œí™”: "ch" (2ì)
â†’ 6ì ë¯¸ë§Œì´ë¼ ê²€ìƒ‰ í•™ìŠµ ë¬´ì‹œë¨ âŒ

ì…ë ¥: "ch 24ë³‘"
â†’ ì •ê·œí™”: "ch" (2ì)
â†’ 6ì ë¯¸ë§Œì´ë¼ ê²€ìƒ‰ í•™ìŠµ ë¬´ì‹œë¨ âŒ
```

**ê²°ë¡ **: **"ch" ë‹¨ë…ìœ¼ë¡œëŠ” ê²€ìƒ‰ í•™ìŠµì´ ì‘ë™í•˜ì§€ ì•ŠìŒ!**

---

### **ì‹œë‚˜ë¦¬ì˜¤ 2: "ch ìƒ¤ë¥´ë„ë„¤" ì…ë ¥**

#### **í’ˆëª© í•™ìŠµ (item_alias)**
```
ì €ì¥: "ch" â†’ "3A24401" (3íšŒ í•™ìŠµ)

ì…ë ¥: "ch ìƒ¤ë¥´ë„ë„¤ 24ë³‘"
â†’ ì •ê·œí™”: "ch ìƒ¤ë¥´ë„ë„¤"
â†’ "ch ìƒ¤ë¥´ë„ë„¤".includes("ch") = true
â†’ Contains ë§¤ì¹­! +1.20 ë³´ë„ˆìŠ¤ (3íšŒ í•™ìŠµ) âœ…
```

#### **ê²€ìƒ‰ í•™ìŠµ (search_learning)**
```
ì €ì¥: "chìƒ¤ë¥´ë„ë„¤" â†’ "3A24401" (5íšŒ í´ë¦­)

ì…ë ¥: "ch ìƒ¤ë¥´ë„ë„¤ 24ë³‘"
â†’ ì •ê·œí™”: "chìƒ¤ë¥´ë„ë„¤" (8ì)
â†’ Exact ë§¤ì¹­! +0.292 ë³´ë„ˆìŠ¤ (5íšŒ í´ë¦­) âœ…
```

**ê²°ë¡ **: **ë‘ ì‹œìŠ¤í…œ ëª¨ë‘ ì‘ë™! ë³´ë„ˆìŠ¤ ì¤‘ë³µ ì ìš© (+1.20 + 0.29 = +1.49)** ğŸ¯

---

### **ì‹œë‚˜ë¦¬ì˜¤ 3: "ì°°ìŠ¤í•˜ì´ì§ ìƒ¤ë¥´ë„ë„¤" ì…ë ¥**

#### **í’ˆëª© í•™ìŠµ (item_alias)**
```
ì €ì¥: "ch" â†’ "3A24401"

ì…ë ¥: "ì°°ìŠ¤í•˜ì´ì§ ìƒ¤ë¥´ë„ë„¤ 24ë³‘"
â†’ ì •ê·œí™”: "ì°°ìŠ¤í•˜ì´ì§ ìƒ¤ë¥´ë„ë„¤"
â†’ "ì°°ìŠ¤í•˜ì´ì§ ìƒ¤ë¥´ë„ë„¤".includes("ch") = false
â†’ ë§¤ì¹­ ì‹¤íŒ¨ âŒ
```

#### **ê²€ìƒ‰ í•™ìŠµ (search_learning)**
```
ì €ì¥: "chìƒ¤ë¥´ë„ë„¤" â†’ "3A24401"

ì…ë ¥: "ì°°ìŠ¤í•˜ì´ì§ ìƒ¤ë¥´ë„ë„¤ 24ë³‘"
â†’ ì •ê·œí™”: "ì°°ìŠ¤í•˜ì´ì§ìƒ¤ë¥´ë„ë„¤" (13ì)
â†’ "ì°°ìŠ¤í•˜ì´ì§ìƒ¤ë¥´ë„ë„¤".includes("chìƒ¤ë¥´ë„ë„¤") = false
â†’ ë§¤ì¹­ ì‹¤íŒ¨ âŒ
```

**ê²°ë¡ **: **"ch"ë¡œ í•™ìŠµí–ˆì§€ë§Œ "ì°°ìŠ¤í•˜ì´ì§"ìœ¼ë¡œ ê²€ìƒ‰í•˜ë©´ ë§¤ì¹­ ì•ˆë¨!**

---

## ğŸ’¡ **ìµœì ì˜ í•™ìŠµ ì „ëµ**

### **1. ì§§ì€ ì•½ì–´ëŠ” í’ˆëª© í•™ìŠµ ê¶Œì¥**
```
âœ… í’ˆëª© í•™ìŠµ: "ch" â†’ "3A24401"
â†’ ì´ìœ : ê²€ìƒ‰ í•™ìŠµì€ 6ì ë¯¸ë§Œ ë¬´ì‹œë¨
â†’ "ch", "bl", "lc" ê°™ì€ ì§§ì€ ì•½ì–´ëŠ” í’ˆëª© í•™ìŠµë§Œ ì‘ë™

âŒ ê²€ìƒ‰ í•™ìŠµ: ìë™ìœ¼ë¡œëŠ” ì €ì¥ë˜ì§€ ì•ŠìŒ
â†’ "ch" (2ì) â†’ 6ì ë¯¸ë§Œì´ë¼ ë¬´ì‹œë¨
```

### **2. ê¸´ ê²€ìƒ‰ì–´ëŠ” ê²€ìƒ‰ í•™ìŠµë„ ìë™ ëˆ„ì **
```
âœ… í’ˆëª© í•™ìŠµ: "ì°°ìŠ¤í•˜ì´ì§ ìƒ¤ë¥´ë„ë„¤" â†’ "3A24401"
â†’ Contains_Specific ë§¤ì¹­ìœ¼ë¡œ ê°•ë ¥í•œ ë³´ë„ˆìŠ¤

âœ… ê²€ìƒ‰ í•™ìŠµ: "ì°°ìŠ¤í•˜ì´ì§ìƒ¤ë¥´ë„ë„¤" â†’ "3A24401" (ìë™ ëˆ„ì )
â†’ í´ë¦­í•  ë•Œë§ˆë‹¤ hit_count ì¦ê°€
â†’ ì •ê·œí™”ëœ í‚¤ê°€ 8ì ì´ìƒì´ë¼ Contains ë§¤ì¹­ë„ ì‘ë™
```

### **3. ì•½ì–´ + í’ˆëª©ëª… ì¡°í•©ì´ ìµœê°•**
```
ì…ë ¥: "ch ìƒ¤ë¥´ë„ë„¤ 24ë³‘"

í’ˆëª© í•™ìŠµ: "ch" â†’ "3A24401" (3íšŒ í•™ìŠµ)
â†’ +1.20 ë³´ë„ˆìŠ¤

ê²€ìƒ‰ í•™ìŠµ: "chìƒ¤ë¥´ë„ë„¤" â†’ "3A24401" (5íšŒ í´ë¦­)
â†’ +0.29 ë³´ë„ˆìŠ¤

ìµœì¢…: +1.49 ë³´ë„ˆìŠ¤! ì••ë„ì  1ìœ„ ë³´ì¥ ğŸ¯
```

---

## ğŸ“Š **ë‘ ì‹œìŠ¤í…œì˜ ì‹œë„ˆì§€ íš¨ê³¼**

### **ì˜ˆì‹œ: "ch ìƒ¤ë¥´ë„ë„¤"ë¥¼ 5ë²ˆ ì‚¬ìš©**

```
1ì°¨ ì…ë ¥ í›„ í•™ìŠµ:
- í’ˆëª© í•™ìŠµ: "ch" â†’ "3A24401" (1íšŒ)
  â†’ +0.60 ë³´ë„ˆìŠ¤
- ê²€ìƒ‰ í•™ìŠµ: "chìƒ¤ë¥´ë„ë„¤" â†’ "3A24401" (1íšŒ ìë™)
  â†’ +0.155 ë³´ë„ˆìŠ¤
- í•©ê³„: +0.755 ë³´ë„ˆìŠ¤

3ì°¨ ì…ë ¥ í›„:
- í’ˆëª© í•™ìŠµ: "ch" â†’ "3A24401" (3íšŒ)
  â†’ +1.20 ë³´ë„ˆìŠ¤
- ê²€ìƒ‰ í•™ìŠµ: "chìƒ¤ë¥´ë„ë„¤" â†’ "3A24401" (3íšŒ ìë™)
  â†’ +0.211 ë³´ë„ˆìŠ¤
- í•©ê³„: +1.411 ë³´ë„ˆìŠ¤

5ì°¨ ì…ë ¥ í›„:
- í’ˆëª© í•™ìŠµ: "ch" â†’ "3A24401" (3íšŒ, ë” ì´ìƒ ì¦ê°€ ì•ˆí•¨)
  â†’ +1.20 ë³´ë„ˆìŠ¤
- ê²€ìƒ‰ í•™ìŠµ: "chìƒ¤ë¥´ë„ë„¤" â†’ "3A24401" (5íšŒ ìë™)
  â†’ +0.245 ë³´ë„ˆìŠ¤
- í•©ê³„: +1.445 ë³´ë„ˆìŠ¤
```

---

## âš¡ **í•µì‹¬ ì •ë¦¬**

### **"ch"ë¥¼ í’ˆëª© í•™ìŠµì— ì €ì¥í•˜ë©´:**

1. **"ch" ë‹¨ë… ì…ë ¥ ì‹œ**
   - í’ˆëª© í•™ìŠµ: âœ… ì‘ë™ (Exact ë§¤ì¹­, score 1.0 ì¦‰ì‹œ í™•ì •)
   - ê²€ìƒ‰ í•™ìŠµ: âŒ ì‘ë™ ì•ˆí•¨ (6ì ë¯¸ë§Œ)

2. **"ch ìƒ¤ë¥´ë„ë„¤" ì…ë ¥ ì‹œ**
   - í’ˆëª© í•™ìŠµ: âœ… ì‘ë™ (Contains ë§¤ì¹­, +1.20 ë³´ë„ˆìŠ¤)
   - ê²€ìƒ‰ í•™ìŠµ: âœ… ì‘ë™ ("chìƒ¤ë¥´ë„ë„¤" 8ì, +0.29 ë³´ë„ˆìŠ¤)
   - **ì¤‘ë³µ ì ìš©**: +1.49 ë³´ë„ˆìŠ¤ (ìµœê°•!) ğŸ¯

3. **"ì°°ìŠ¤í•˜ì´ì§ ìƒ¤ë¥´ë„ë„¤" ì…ë ¥ ì‹œ**
   - í’ˆëª© í•™ìŠµ: âŒ ë§¤ì¹­ ì•ˆë¨ ("ì°°ìŠ¤í•˜ì´ì§"ì— "ch" ì—†ìŒ)
   - ê²€ìƒ‰ í•™ìŠµ: âŒ ë§¤ì¹­ ì•ˆë¨ ("ì°°ìŠ¤í•˜ì´ì§ìƒ¤ë¥´ë„ë„¤"ì— "chìƒ¤ë¥´ë„ë„¤" ì—†ìŒ)

### **ê¶Œì¥ ì „ëµ**
âœ… ì§§ì€ ì•½ì–´("ch", "bl"): **í’ˆëª© í•™ìŠµìœ¼ë¡œë§Œ ì €ì¥**
âœ… ê¸´ ê²€ìƒ‰ì–´("ì°°ìŠ¤í•˜ì´ì§ ìƒ¤ë¥´ë„ë„¤"): **í’ˆëª© í•™ìŠµ + ê²€ìƒ‰ í•™ìŠµ ìë™ ëˆ„ì **
âœ… ì•½ì–´ + í’ˆëª©ëª… ì¡°í•©("ch ìƒ¤ë¥´ë„ë„¤"): **ìµœê°• ì‹œë„ˆì§€ íš¨ê³¼!**

---

## ğŸ” **ë””ë²„ê¹… ë°©ë²•**

### **1. í’ˆëª© í•™ìŠµ í™•ì¸**
```bash
npm run db:console:local
> SELECT * FROM item_alias WHERE alias LIKE '%ch%';
```

### **2. ê²€ìƒ‰ í•™ìŠµ í™•ì¸**
```bash
> SELECT * FROM search_learning WHERE search_key LIKE '%ch%';
```

### **3. ì‹¤ì œ ë³´ë„ˆìŠ¤ í™•ì¸**
```bash
pm2 logs order-ai --nostream | grep -E '(userLearning|learnedBonus)'
```

---

**ê²°ë¡ **: **"ch"ë¥¼ ì €ì¥í•˜ë©´ ì§§ì€ ì•½ì–´ ì…ë ¥ ì‹œ ì¦‰ì‹œ í™•ì •ë˜ê³ , "ch ìƒ¤ë¥´ë„ë„¤" ê°™ì€ ì¡°í•© ì…ë ¥ ì‹œ ë‘ ì‹œìŠ¤í…œì´ ëª¨ë‘ ì‘ë™í•´ ì••ë„ì  ë³´ë„ˆìŠ¤ë¥¼ ë°›ìŠµë‹ˆë‹¤!** ğŸ¯
